<!DOCTYPE html>
<html lang="en">
    <head>
      <meta charset="utf-6">
       <!-- Latest compiled and minified CSS -->
       <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    </head>
    <body>

<p id="notice"><%= notice %></p>

<h1>My Projects</h1>


<div class="m-t-25">
  <div class="pull-right">
    <%= link_to 'Create New Project', new_project_path, class: 'btn btn-success btn-lg' %>
  </div>

  <ul class="nav nav-pills">
    <li role="presentation" class="<%= (params[:status] == nil) ? '' : 'active' %>active"><a href="?">All</a></li><br>
    <% Project.statuses.keys.map do |status| %>
        <li role="presentation" class="<%= (params[:status] == status) ? 'active' : '' %>">
          <a href="?status=<%= status %>"><%= status.titleize %></a></li>
    <% end %>
  </ul>
</div>


<h3><%= @total_projects_count != 0 ? ('Showing ' + pluralize(@total_projects_count, 'project') + ' found:') : 'No Projects found!' %> </h3>

<% @projects.each do |project| %>
    <div class="jumbotron box m-t-15">
      <div class="row">
        <div class="col-lg-3">
          <strong>Project Name:</strong>
        </div>
        <div class="col-lg-6">
          <%= project.name %>
        </div>
        <div class="col-lg-3 text-right">
          <div class="label label-<%= get_css_class_by_status(Project.statuses[project.status]) %>"><%= project.status.titleize %></div>
        </div>
      </div>

      <% if project.department %>
          <div class="row">
            <div class="col-lg-3">
              <strong>Research Category:</strong>
            </div>
            <div class="col-lg-6">
              <%= project.department.name %>
            </div>
            <div class="col-lg-3">
            </div>
          </div>
      <% else %>
          <div class="row">
            <div class="col-lg-3">
              &nbsp;
            </div>
            <div class="col-lg-6">
              &nbsp;
            </div>
            <div class="col-lg-3">
              &nbsp;
            </div>
          </div>
      <% end %>

      <div class="row">


        <div class="col-lg-3 text-right">
          <% if project.user.id == current_user.id %>
              <%= link_to 'View', project, class: 'btn btn-default btn-xs' %>
              <%= link_to 'Edit', edit_project_path(project), class: 'btn btn-default btn-xs' %>
              <%= link_to 'Delete', project, method: :delete, data: {confirm: 'Are you sure?'}, class: 'btn btn-default btn-xs' %>
          <% else %>
              <%= link_to 'View', project, class: 'btn btn-default btn-xs' %>
          <% end %>
        </div>
      </div>

    </div>
<% end %>

<!-- Latest compiled and minified JavaScript -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
</body>
</html>
